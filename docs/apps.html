<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UNPIE — Apps</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--brand:#1e73be;--brand-dark:#165a93}
    html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; }
    .container { max-width: 1100px; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="border-b bg-white sticky top-0 z-40">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="./" class="text-sm md:text-base text-[var(--brand)] hover:underline">← Back to UNPIE Home</a>
      <strong class="text-[var(--brand)]">UNDERSTANDING PENSIONS IN EUROPE (UNPIE)</strong>
    </div>
  </header>

  <main class="container mx-auto px-4 py-10">
    <h1 class="text-2xl font-semibold">Apps</h1>
    <p class="mt-3 text-slate-700">
      All apps are deployed under <code>https://www.sebastianstoeckl.com/UNPIE2/</code>.
      Switch language via <code>?lang=en</code> / <code>?lang=de</code>.
    </p>

    <!-- Filter (optional, simple client-side) -->
    <div class="mt-6">
      <input id="filter" type="search" placeholder="Filter apps by title…"
             class="w-full md:w-1/2 rounded-lg border px-3 py-2" />
    </div>

    <!-- Sections -->
    <div id="sections" class="mt-8 space-y-10"></div>
  </main>

  <footer class="border-t py-8 text-sm text-slate-600">
    <div class="container mx-auto px-4">
      © 2025 Understanding Pensions in Europe (UNPIE).
    </div>
  </footer>

  <template id="section-tmpl">
    <section>
      <h2 class="text-xl font-semibold"></h2>
      <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>
  </template>

  <template id="card-tmpl">
    <article class="rounded-2xl border bg-white shadow-sm overflow-hidden flex flex-col">
      <div class="aspect-[16/9] bg-slate-100">
        <img class="w-full h-full object-cover" alt="App screenshot" />
      </div>
      <div class="p-5 flex-1 flex flex-col">
        <h3 class="font-semibold leading-snug"></h3>
        <p class="mt-2 text-sm text-slate-700 flex-1"></p>
        <div class="mt-4 flex gap-2 text-sm">
          <a class="px-3 py-1 rounded-lg bg-blue-700 text-white hover:bg-blue-800" target="_blank" rel="noopener">English</a>
          <a class="px-3 py-1 rounded-lg bg-slate-900 text-white hover:bg-slate-800" target="_blank" rel="noopener">Deutsch</a>
        </div>
      </div>
    </article>
  </template>

  <script>
    const BASE = "https://www.sebastianstoeckl.com/UNPIE2";

    const APP_SECTIONS = [
      {
        title: "Introductory Apps",
        apps: [
          { file: "case1.html",  title: "App 1: Future value of single savings payment", desc: "FV of a single savings payment.", thumb: "app1.png" },
          { file: "case2.html",  title: "App 2: Future value (nominal and real) of single savings payment", desc: "FV of one payment, nominal vs real.", thumb: "app2.png" },
          { file: "case3.html",  title: "App 3: Future value of constant yearly savings payments", desc: "FV of constant annual savings.", thumb: "app3.png" },
          { file: "case4.html",  title: "App 4: Future value (nominal and real) of constant (nominal) yearly savings payments", desc: "FV of nominal yearly savings: nominal vs real.", thumb: "app4.png" },
          { file: "case5.html",  title: "App 5: Future value (nominal and real) of constant (real) yearly savings payments", desc: "FV of real yearly savings: nominal vs real.", thumb: "app5.png" },
          { file: "case6.html",  title: "App 6: Required wealth to finance constant (nominal) yearly spending", desc: "Wealth needed for constant nominal spending.", thumb: "app6.png" },
          { file: "case7.html",  title: "App 7: Required wealth to finance constant (nominal/real) yearly spending", desc: "Wealth needed for constant spending (nominal or real).", thumb: "app7.png" },
          { file: "case8.html",  title: "App 8: Real yearly spending financed by given (real) yearly savings", desc: "Real spending supported by given real savings.", thumb: "app8.png" },
          { file: "case9.html",  title: "App 9: Yearly savings required to finance given yearly spending (both in real terms)", desc: "Savings needed to fund target real spending.", thumb: "app9.png" }
        ]
      },
      {
        title: "Apps Including Risk",
        apps: [
          { file: "case10.html", title: "App 10: Real yearly pension resulting from constant (real) yearly savings", desc: "Stochastic real pension from constant real savings.", thumb: "app10.png" },
          { file: "case11.html", title: "App 11: Real yearly savings required to reach minimum desired (real) yearly pension with probability p", desc: "Savings to reach a pension target with probability p.", thumb: "app11.png" },
          { file: "case12.html", title: "App 12: Years to ruin when spending yearly from given retirement savings", desc: "Years to portfolio ruin under yearly spending.", thumb: "app12.png" },
          { file: "case13.html", title: "App 13: Maximum periodic spending possible to exceed specified minimum years to ruin with probability p", desc: "Max spending s.t. years-to-ruin ≥ threshold with probability p.", thumb: "app13.png" }
        ]
      },
      {
        title: "Longevity / Mortality",
        apps: [
          { file: "case7m.html", title: "App 7m: Pension fund’s view: Required wealth to finance constant (nominal/real) pension payments", desc: "Required wealth for lifelong pensions under mortality.", thumb: "app7m.png" },
          { file: "case8m.html", title: "App 8m: Real pension payments that can be financed by given (real) savings", desc: "Real pension payments supported by given real savings.", thumb: "app8m.png" },
          { file: "case9m.html", title: "App 9m: Savings required to finance given life-long continuous spending (both in real terms)", desc: "Savings needed for lifelong continuous real spending.", thumb: "app9m.png" },
          { file: "case14.html", title: "App 14: \"Fair\" conversion rate for given mortality and constant expected (or average) investment returns", desc: "Approximate fair annuity conversion rate.", thumb: "app14.png" },
          { file: "case15.html", title: "App 15: Approximate probability of retirement ruin for given spending rate, wealth & log-normal real returns", desc: "Approximate ruin probability under log-normal returns.", thumb: "app15.png" },
          { file: "case16.html", title: "App 16: Moments and conditional survival probabilities for the Gompertz–Makeham distribution", desc: "Moments & survival probabilities under Gompertz–Makeham.", thumb: "app16.png" }
        ]
      }
    ];

    const sections = document.getElementById("sections");
    const secTmpl = document.getElementById("section-tmpl");
    const cardTmpl = document.getElementById("card-tmpl");

    function render(filter="") {
      sections.innerHTML = "";
      APP_SECTIONS.forEach(s => {
        const sNode = secTmpl.content.cloneNode(true);
        sNode.querySelector("h2").textContent = s.title;
        const grid = sNode.querySelector("div.grid");
        s.apps
          .filter(a => a.title.toLowerCase().includes(filter.toLowerCase()))
          .forEach(app => {
            const c = cardTmpl.content.cloneNode(true);
            c.querySelector("img").src = `assets/screenshots/${app.thumb}`;
            c.querySelector("img").alt = `${app.title} — screenshot`;
            c.querySelector("h3").textContent = app.title;
            c.querySelector("p").textContent = app.desc;
            const links = c.querySelectorAll("a");
            links[0].href = `${BASE}/${app.file}?lang=en`;
            links[1].href = `${BASE}/${app.file}?lang=de`;
            grid.appendChild(c);
          });
        sections.appendChild(sNode);
      });
    }

    render();
    document.getElementById("filter").addEventListener("input", (e) => render(e.target.value));
  </script>
</body>
</html>
